# AI Crypto Guard - Pre-Sign Risk Guard

## Описание проекта
AI Crypto Guard - это расширение браузера Chrome, которое защищает ваши криптовалютные транзакции от мошенничества. Расширение перехватывает вызовы кошелька и выполняет проверки безопасности перед подписанием транзакций.

## Возможности

### Pre-Sign Risk Guard
Перехватывает и анализирует транзакции перед подписанием:
- **eth_sendTransaction** - отправка транзакций
- **eth_signTypedData_v4** - подписание типизированных данных (EIP-712)
- **personal_sign** - персональные подписи
- **eth_sign** - общие подписи

### Проверки безопасности

1. **Unlimited Approve Detection** - обнаружение неограниченных разрешений (MAX_UINT256)
2. **ERC721/1155 setApprovalForAll** - обнаружение неограниченного доступа к NFT
3. **Admin Function Detection** - обнаружение чувствительных функций администратора:
   - transferOwnership
   - upgradeTo
   - upgradeToAndCall
4. **High Value Transfer** - предупреждение о переводах >= 1 ETH
5. **Gas Simulation** - оценка газа через eth_estimateGas с использованием RPC
   - Предупреждение если транзакция может отменить (revert)
   - Предупреждение если газ > 1,000,000

## Инструкции по установке

### Шаг 1: Загрузка расширения
1. Клонируйте репозиторий или загрузите ZIP:
   ```bash
   git clone https://github.com/kaikakai016/ai-crypto-guard.git
   ```

### Шаг 2: Установка в Chrome
1. Откройте Chrome и перейдите в `chrome://extensions/`
2. Включите "Режим разработчика" (Developer mode) в правом верхнем углу
3. Нажмите "Загрузить распакованное расширение" (Load unpacked)
4. Выберите папку с расширением `ai-crypto-guard`
5. Расширение установлено! Значок появится в панели инструментов

## Руководство по настройке

### Шаг 3: Настройка RPC для Gas Simulation

Для максимальной защиты настройте RPC URL:

#### Вариант 1: Infura
1. Зарегистрируйтесь на https://infura.io
2. Создайте новый проект
3. Скопируйте API Key
4. В расширении введите RPC URL:
   ```
   https://mainnet.infura.io/v3/YOUR_API_KEY
   ```
5. Chain ID: `0x1` (Ethereum Mainnet)

#### Вариант 2: Alchemy
1. Зарегистрируйтесь на https://www.alchemy.com
2. Создайте новое приложение
3. Скопируйте HTTPS URL
4. В расширении введите RPC URL:
   ```
   https://eth-mainnet.g.alchemy.com/v2/YOUR_API_KEY
   ```
5. Chain ID: `0x1` (Ethereum Mainnet)

#### Вариант 3: Sepolia Testnet (для тестирования)
1. Получите API ключ от Infura или Alchemy для Sepolia
2. RPC URL:
   ```
   https://sepolia.infura.io/v3/YOUR_API_KEY
   ```
3. Chain ID: `0xaa36a7` (Sepolia)

### Шаг 4: Настройка параметров защиты

Откройте расширение и настройте параметры:

1. **Enable Guard** (по умолчанию: включено)
   - Включите для активации защиты
   - Отключите для отключения всех проверок

2. **Fail-Open** (по умолчанию: выключено)
   - **Выключено (Fail-Closed)**: блокировать транзакции при ошибках анализа (рекомендуется)
   - **Включено (Fail-Open)**: разрешать транзакции при ошибках анализа

3. **RPC URL**
   - Введите URL вашего RPC провайдера
   - Необходим для gas simulation

4. **Chain ID**
   - `0x1` для Ethereum Mainnet
   - `0xaa36a7` для Sepolia testnet
   - Другие значения для других сетей

5. Нажмите **Save Settings**

## Использование

1. Расширение работает автоматически после установки
2. При попытке подписать транзакцию:
   - Расширение перехватит запрос
   - Выполнит проверки безопасности
   - Покажет предупреждение при обнаружении рисков
   - Заблокирует опасную транзакцию
3. Вы также можете проверить адреса вручную в popup расширения

## Рекомендации по безопасности

✅ **Рекомендуется:**
- Включить Guard
- Оставить Fail-Open выключенным (fail-closed)
- Настроить RPC URL для gas simulation
- Внимательно читать предупреждения

⚠️ **Предупреждения:**
- Расширение не может гарантировать 100% защиту
- Всегда проверяйте адреса и суммы перед подписанием
- Не игнорируйте предупреждения расширения
- Используйте официальные RPC провайдеры

## Примеры сценариев использования

### Сценарий 1: Защита от Unlimited Approve
Вы пытаетесь одобрить токены на DeFi платформе:
- Расширение обнаружит MAX_UINT256 в approve
- Покажет предупреждение: "Unlimited token approval (MAX_UINT256)"
- Заблокирует транзакцию
- Вы можете выбрать более безопасную сумму

### Сценарий 2: Проверка NFT Approval
Вы подписываете setApprovalForAll для NFT:
- Расширение обнаружит неограниченный доступ к NFT
- Покажет: "SetApprovalForAll: granting unlimited NFT access"
- Заблокирует потенциально опасную операцию

### Сценарий 3: Высокая сумма перевода
Вы отправляете 5 ETH:
- Расширение предупредит: "High value transfer: 5.0000 ETH"
- Заблокирует для дополнительной проверки
- Вы можете убедиться что адрес правильный

## Поддержка и вопросы

Если у вас есть вопросы или проблемы:
1. Проверьте что RPC URL правильный
2. Убедитесь что Guard включен
3. Посмотрите в консоль браузера (F12) для дополнительной информации
4. Откройте issue на GitHub: https://github.com/kaikakai016/ai-crypto-guard/issues

## Лицензия

MIT License
